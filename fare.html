<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fare & Timing | Local Bus Info</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          boxShadow: {
            premium: "0 18px 50px rgba(2, 6, 23, 0.08)",
            soft: "0 12px 28px rgba(2, 6, 23, 0.06)",
          }
        }
      }
    };
  </script>
</head>

<body class="bg-slate-50 text-slate-900">
  <!-- NAV (you will handle via your own common.js) -->
  <div id="navbar"></div>

  <main class="max-w-6xl mx-auto px-4 sm:px-6 py-6 sm:py-10">
    <!-- Hero -->
    <section class="relative overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-premium">
      <div class="absolute inset-0 pointer-events-none">
        <div class="absolute -top-24 -left-24 h-72 w-72 rounded-full bg-emerald-200/40 blur-3xl"></div>
        <div class="absolute -bottom-24 -right-24 h-72 w-72 rounded-full bg-emerald-300/30 blur-3xl"></div>
      </div>

      <div class="relative p-6 sm:p-10">
        <div class="inline-flex items-center gap-2 rounded-full border border-emerald-200 bg-emerald-50 px-3 py-1 text-xs font-semibold text-emerald-700">
          <span class="h-2 w-2 rounded-full bg-emerald-500"></span>
          Demo calculator • Green premium UI
        </div>

        <h1 class="mt-4 text-3xl sm:text-4xl font-extrabold tracking-tight">
          Fare & Timing Calculator
        </h1>

        <p class="mt-3 max-w-2xl text-slate-600 leading-relaxed">
          Enter <b>From</b> and <b>To</b> to get an estimated fare and travel time.
          This uses demo data for practice & viva (not real-time).
        </p>

        <div class="mt-6 flex flex-wrap gap-3">
          <button id="scrollToCalc"
            class="inline-flex items-center justify-center rounded-2xl bg-emerald-600 px-4 py-2.5 font-semibold text-white shadow-soft hover:bg-emerald-700 transition">
            Calculate Now
          </button>
        </div>
      </div>
    </section>

    <!-- Calculator -->
    <section id="calcSection" class="mt-8 grid grid-cols-1 lg:grid-cols-3 gap-5">
      <!-- Form -->
      <div class="lg:col-span-2 rounded-3xl border border-slate-200 bg-white p-5 sm:p-6 shadow-soft">
        <div class="flex items-start justify-between gap-3">
          <div>
            <h2 class="text-xl font-extrabold tracking-tight">Calculate</h2>
            <p class="mt-1 text-sm text-slate-600">
              Use demo place names exactly (example: Mirpur, Motijheel, Gulistan).
            </p>
          </div>

          <span class="inline-flex items-center rounded-full border border-emerald-200 bg-emerald-50 px-3 py-1 text-xs font-semibold text-emerald-700">
            Works on specific demo routes
          </span>
        </div>

        <div class="mt-5 grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div>
            <label class="text-sm font-semibold text-slate-800">From</label>
            <input id="fromInput"
              class="mt-2 w-full rounded-2xl border border-slate-200 bg-white px-4 py-3 outline-none focus:ring-4 focus:ring-emerald-100 focus:border-emerald-300"
              placeholder="e.g., Mirpur" />
            <p class="mt-2 text-xs text-slate-500">
              Suggestions: Mirpur, Uttara, Dhanmondi, Farmgate, Jatrabari
            </p>
          </div>

          <div>
            <label class="text-sm font-semibold text-slate-800">To</label>
            <input id="toInput"
              class="mt-2 w-full rounded-2xl border border-slate-200 bg-white px-4 py-3 outline-none focus:ring-4 focus:ring-emerald-100 focus:border-emerald-300"
              placeholder="e.g., Motijheel" />
            <p class="mt-2 text-xs text-slate-500">
              Suggestions: Motijheel, Gulistan, Shahbagh, Badda
            </p>
          </div>
        </div>

        <div class="mt-5 flex flex-wrap gap-3">
          <button id="calcBtn"
            class="inline-flex items-center justify-center rounded-2xl bg-emerald-600 px-5 py-3 font-semibold text-white shadow-soft hover:bg-emerald-700 transition">
            Calculate
          </button>

          <button id="resetBtn"
            class="inline-flex items-center justify-center rounded-2xl border border-slate-200 bg-white px-5 py-3 font-semibold text-slate-800 hover:bg-slate-50 transition">
            Reset
          </button>

          <button id="swapBtn"
            class="inline-flex items-center justify-center rounded-2xl border border-slate-200 bg-white px-5 py-3 font-semibold text-slate-800 hover:bg-slate-50 transition">
            Swap
          </button>
        </div>

        <div class="mt-4 text-sm text-slate-600">
          <span class="font-semibold text-slate-900">Quick demo routes:</span>
          <span class="ml-2 inline-flex flex-wrap gap-2">
            <button class="chip" data-from="Mirpur" data-to="Motijheel">Mirpur → Motijheel</button>
            <button class="chip" data-from="Mirpur" data-to="Gulistan">Mirpur → Gulistan</button>
            <button class="chip" data-from="Uttara" data-to="Gulistan">Uttara → Gulistan</button>
            <button class="chip" data-from="Dhanmondi" data-to="Shahbagh">Dhanmondi → Shahbagh</button>
          </span>
        </div>
      </div>

      <!-- Result -->
      <aside class="rounded-3xl border border-slate-200 bg-white p-5 sm:p-6 shadow-soft">
        <h2 class="text-xl font-extrabold tracking-tight">Result</h2>

        <p id="resultHint" class="mt-2 text-sm text-slate-600">
          Enter From/To then click <b>Calculate</b>.
        </p>

        <!-- Success -->
        <div id="resultCard" class="mt-5 hidden rounded-2xl border border-emerald-200 bg-emerald-50 p-4">
          <p class="text-xs font-semibold text-emerald-700">Matched route</p>
          <p id="routeText" class="mt-1 font-extrabold text-slate-900"></p>

          <div class="mt-4 grid grid-cols-2 gap-3">
            <div class="rounded-2xl bg-white border border-slate-200 p-3">
              <p class="text-xs font-semibold text-slate-500">Estimated Fare</p>
              <p id="fareText" class="mt-1 text-lg font-extrabold text-slate-900"></p>
            </div>

            <div class="rounded-2xl bg-white border border-slate-200 p-3">
              <p class="text-xs font-semibold text-slate-500">Estimated Time</p>
              <p id="timeText" class="mt-1 text-lg font-extrabold text-slate-900"></p>
            </div>

            <div class="rounded-2xl bg-white border border-slate-200 p-3 col-span-2">
              <p class="text-xs font-semibold text-slate-500">Notes</p>
              <p id="noteText" class="mt-1 text-sm text-slate-700 leading-relaxed"></p>
            </div>
          </div>
        </div>

        <!-- Error -->
        <div id="errorCard" class="mt-5 hidden rounded-2xl border border-red-200 bg-red-50 p-4">
          <p class="text-sm font-semibold text-red-700">
            No demo data found for this route.
          </p>
          <p class="mt-1 text-sm text-red-700/80">
            Try one of the quick demo routes or type exactly like suggestions.
          </p>
        </div>

        <div class="mt-6 rounded-2xl border border-slate-200 bg-slate-50 p-4">
          <p class="text-xs font-semibold text-slate-500">Demo disclaimer</p>
          <p class="mt-1 text-sm text-slate-600 leading-relaxed">
            This calculator uses fake route data for UI practice. Real-life fares and time may vary.
          </p>
        </div>
      </aside>
    </section>

    <!-- Travel tips -->
    <section class="mt-8">
      <div class="flex items-baseline justify-between gap-3 flex-wrap">
        <h2 class="text-xl font-extrabold tracking-tight">Travel Tips</h2>
        <span class="inline-flex items-center rounded-full border border-emerald-200 bg-emerald-50 px-3 py-1 text-xs font-semibold text-emerald-700">
          Simple & practical
        </span>
      </div>

      <div class="mt-4 grid grid-cols-1 md:grid-cols-3 gap-4">
        <article class="rounded-3xl border border-slate-200 bg-white p-5 shadow-soft">
          <div class="inline-flex h-10 w-10 items-center justify-center rounded-2xl bg-emerald-100 text-emerald-700 font-extrabold">1</div>
          <h3 class="mt-3 font-extrabold">Go early if possible</h3>
          <p class="mt-2 text-sm text-slate-600 leading-relaxed">
            Morning hours often have smoother traffic. Time estimates become more reliable.
          </p>
        </article>

        <article class="rounded-3xl border border-slate-200 bg-white p-5 shadow-soft">
          <div class="inline-flex h-10 w-10 items-center justify-center rounded-2xl bg-emerald-100 text-emerald-700 font-extrabold">2</div>
          <h3 class="mt-3 font-extrabold">Keep small change</h3>
          <p class="mt-2 text-sm text-slate-600 leading-relaxed">
            Having small notes helps faster payment and reduces hassle during busy times.
          </p>
        </article>

        <article class="rounded-3xl border border-slate-200 bg-white p-5 shadow-soft">
          <div class="inline-flex h-10 w-10 items-center justify-center rounded-2xl bg-emerald-100 text-emerald-700 font-extrabold">3</div>
          <h3 class="mt-3 font-extrabold">Try alternate stops</h3>
          <p class="mt-2 text-sm text-slate-600 leading-relaxed">
            If your usual stop is crowded, walking 3–5 minutes to a nearby stop can help.
          </p>
        </article>
      </div>
    </section>
  </main>

  <!-- FOOTER (you will handle via your own common.js) -->
  <div id="footer"></div>

  <script>
    // Demo routes only for calculator
    const ROUTES = [
      { from: "Mirpur",    to: "Motijheel", fare: 40, timeMin: 55, note: "Local buses stop more often. Time can vary in peak hours." },
      { from: "Mirpur",    to: "Gulistan",  fare: 35, timeMin: 50, note: "Good route choice for city center access." },
      { from: "Uttara",    to: "Gulistan",  fare: 45, timeMin: 60, note: "Counter buses may have fewer stops and slightly higher fare." },
      { from: "Dhanmondi", to: "Shahbagh",  fare: 20, timeMin: 25, note: "Short route. Consider walking if traffic is heavy." },
      { from: "Farmgate",  to: "Badda",     fare: 35, timeMin: 35, note: "Busy corridor. Time can vary a lot." },
      { from: "Jatrabari", to: "Motijheel", fare: 30, timeMin: 30, note: "Common daily commute route." }
    ];

    function norm(s) {
      return (s || "").trim().toLowerCase().replace(/\s+/g, " ");
    }

    function key(from, to) {
      return `${norm(from)}-${norm(to)}`;
    }

    function findRoute(from, to) {
      const k = key(from, to);
      return ROUTES.find(r => key(r.from, r.to) === k) || null;
    }

    function formatMinutes(min) {
      const h = Math.floor(min / 60);
      const m = min % 60;
      return h <= 0 ? `${m} min` : `${h} hr ${m} min`;
    }

    document.addEventListener("DOMContentLoaded", () => {
      const fromInput = document.getElementById("fromInput");
      const toInput   = document.getElementById("toInput");
      const calcBtn   = document.getElementById("calcBtn");
      const resetBtn  = document.getElementById("resetBtn");
      const swapBtn   = document.getElementById("swapBtn");

      const resultHint = document.getElementById("resultHint");
      const resultCard = document.getElementById("resultCard");
      const errorCard  = document.getElementById("errorCard");

      const routeText = document.getElementById("routeText");
      const fareText  = document.getElementById("fareText");
      const timeText  = document.getElementById("timeText");
      const noteText  = document.getElementById("noteText");

      // Style chips (looks premium + consistent)
      document.querySelectorAll(".chip").forEach(btn => {
        btn.className =
          "chip inline-flex items-center rounded-full border border-slate-200 bg-white px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-slate-50 transition";
      });

      function showError(msg) {
        resultCard.classList.add("hidden");
        errorCard.classList.remove("hidden");
        resultHint.textContent = msg || "No demo data found for this route.";
      }

      function showResult(r) {
        errorCard.classList.add("hidden");
        resultCard.classList.remove("hidden");

        routeText.textContent = `${r.from} → ${r.to}`;
        fareText.textContent  = `৳${Number(r.fare).toFixed(0)}`;
        timeText.textContent  = formatMinutes(r.timeMin);
        noteText.textContent  = r.note;

        resultHint.textContent = "Result updated from demo data.";
      }

      function validate(from, to) {
        if (!from || !to) return "Please enter both From and To.";
        if (norm(from) === norm(to)) return "From and To cannot be the same place.";
        if (from.length < 3 || to.length < 3) return "Type at least 3 characters for both inputs.";
        return null;
      }

      function calculate() {
        const from = fromInput.value.trim();
        const to   = toInput.value.trim();

        const err = validate(from, to);
        if (err) return showError(err);

        const match = findRoute(from, to);
        if (!match) return showError("No demo data found. Try Mirpur → Motijheel.");

        showResult(match);
      }

      calcBtn.addEventListener("click", calculate);

      resetBtn.addEventListener("click", () => {
        fromInput.value = "";
        toInput.value = "";
        resultCard.classList.add("hidden");
        errorCard.classList.add("hidden");
        resultHint.textContent = "Enter From/To then click Calculate.";
        fromInput.focus();
      });

      swapBtn.addEventListener("click", () => {
        const tmp = fromInput.value;
        fromInput.value = toInput.value;
        toInput.value = tmp;
      });

      // Chips -> auto fill + search
      document.querySelectorAll(".chip").forEach(btn => {
        btn.addEventListener("click", () => {
          fromInput.value = btn.getAttribute("data-from") || "";
          toInput.value = btn.getAttribute("data-to") || "";
          calculate();
        });
      });

      // Hero scroll
      document.getElementById("scrollToCalc").addEventListener("click", () => {
        document.getElementById("calcSection").scrollIntoView({ behavior: "smooth" });
        fromInput.focus();
      });

      // Enter support
      [fromInput, toInput].forEach(inp => {
        inp.addEventListener("keydown", (e) => {
          if (e.key === "Enter") calculate();
        });
      });
    });
  </script>

  <!-- You will keep your own common.js here if you want -->
  <script src="scripts/common.js"></script>
</body>
</html>
